/*

    Defines version and build number

*/

ext.chatVersion = '1.1.1'
def foundationMaven = System.getenv("foundationmaven")
ext.foundationFromMaven = foundationMaven != null ? foundationMaven : false

def isComapiRelease = System.getenv("isparagonrelease")
ext.isReleaseVersion = isComapiRelease != null ? isComapiRelease : false

if (project.hasProperty("teamcity")) {
    ext.buildNumber = teamcity['build.number']
} else {
    ext.buildNumber = getDate()
}

def getDate() {
    def date = new Date()
    def formattedDate = date.format('yyyyMMddHHmmss')
    return formattedDate
}

task printChatVersion << {
    logger.lifecycle("Version number is " + chatVersion)
    println chatVersion
}

task printBuildNumber << {
    logger.lifecycle("Build number is " + buildNumber)
    println buildNumber
}